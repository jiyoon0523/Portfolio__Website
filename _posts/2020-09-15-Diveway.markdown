---
layout: post
title:  Diveway
date:   2020-09-15 15:01:35 +0300
image:  Diveway_Sample.jpg
tags:   [Game,Ocean,PC]
---
## ğŸŒŠ Project Overview
  
**<font size="4"> ëˆˆ ë–  ë³´ë‹ˆ ê¹Šì€ ë°”ë‹·ì†? ë¯¸ì…˜ì„ ìˆ˜í–‰í•˜ê³  ë°”ë‹¤ ì„¸ê³„ë¥¼ êµ¬í•˜ì!</font>**  

**<font size="4">ì†Œê°œ/ </font>** ì–´ë“œë²¤ì²˜ ì¸ë”” ê²Œì„ ABZÃ›ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ ì‚¼ì•„ ë™ì¼í•œ ê¸°ëŠ¥ êµ¬í˜„  
**<font size="4">ê¸°ê°„/ </font>** 2020.08.10~2020.09.15 (5ì£¼)  
**<font size="4">í™˜ê²½/ </font>** Unity 2019.4.8f1 3D, Visual Studio 2017  
**<font size="4">ì—­í• / </font>** ì¹´ë©”ë¼ ë·° ì¡°ì‘, í”Œë ˆì´ì–´ ì¡°ì‘, íŠœí† ë¦¬ì–¼, ë¯¸ì…˜

---

## ğŸŒŠ Design& Schedule

**<font size="4">í”„ë¡œì íŠ¸ êµ¬ì¡°</font>**

**<font size="4">ê°œë°œ ì¼ì •</font>**

---

## ğŸŒŠ Development

**[1. ì¹´ë©”ë¼ ë·° ì¡°ì‘](#1-ì¹´ë©”ë¼-ë·°-ì¡°ì‘)**
{: .bold}   
* ë§ˆìš°ìŠ¤ë¥¼ ì´ìš©í•œ ì‹œì  ì¡°ì ˆ

**[2. í”Œë ˆì´ì–´ ì¡°ì‘](#2-í”Œë ˆì´ì–´-ì¡°ì‘)**
{: .bold}    
* í‚¤ë³´ë“œì™€ ë§ˆìš°ìŠ¤ë¥¼ ì´ìš©í•œ í”Œë ˆì´ì–´ ì´ë™ ë° íšŒì „

**[3. íŠœí† ë¦¬ì–¼](#3-íŠœí† ë¦¬ì–¼)**
{: .bold}   
* ì¡°ì‘ë²• ì•ˆë‚´ UI
* boolê°’ì„ ì´ìš©í•œ ìˆ˜í–‰ ì—¬ë¶€ íŒë‹¨

#### 4. ë¯¸ì…˜
* ì›…ë©ì´ì— ê°‡íŒ ë¬¼ê³ ê¸° í’€ì–´ì£¼ê¸°
* ë¬¼ê³ ê¸°ì™€ í•¨ê»˜ ballet
* ìƒì–´ ì„ìƒì— ì•‰ì•„ ëª…ìƒí•˜ê¸°
* ë‹¬ì„±ë¥  UI ì—…ë°ì´íŠ¸

---
### 1. ì¹´ë©”ë¼ ë·° ì¡°ì‘  

ì¹´ë©”ë¼ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í”Œë ˆì´ì–´ì˜ ë’¤ì—ì„œ í”Œë ˆì´ì–´ë¥¼ ë”°ë¼ê°€ì§€ë§Œ, ë§ˆìš°ìŠ¤ë¥¼ ìƒí•˜ì¢Œìš°ë¡œ ì´ë™í•´ í”Œë ˆì´ì–´ì˜ ìœ„, ì•„ë˜, ì–‘ ì˜†ì—ì„œ í”Œë ˆì´ì–´ë¥¼ ë°”ë¼ë³´ê²Œ í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ì‹œì  ì¡°ì ˆì€ ë°”ë‹·ì† í’ê²½ì„ 360Â°ë¡œ ê°ìƒí•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ ë³´ë‹¤ í’ë¶€í•œ í”Œë ˆì´ ê²½í—˜ì„ ì œê³µí•œë‹¤.  

![]({{site.baseurl}}/images/Diveway_CamPos_gif.gif)  


ì´ì™€ ê°™ì€ ì¹´ë©”ë¼ ë·°ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.
{: .bold}

###### 1. í•­ìƒ í”Œë ˆì´ì–´ ë’¤ì— ìœ„ì¹˜í•˜ëŠ” CamPos1ê³¼ í”Œë ˆì´ì–´ ì£¼ë³€ì„ ë„ëŠ” CamPos2ë¥¼ ë§Œë“ ë‹¤.  

![]({{site.baseurl}}/images/Diveway_Campos1and2.jpg) 

- CamPos2ê°€ ë§ˆìš°ìŠ¤ ì…ë ¥ì— ë”°ë¼ í”Œë ˆì´ì–´ ì£¼ë³€ì„ ëŒê²Œ í•˜ëŠ” ì½”ë“œ
{% highlight c# %}
  void RotateByMouse()
    {
       // ë§ˆìš°ìŠ¤ ì…ë ¥ì„ ëˆ„ì í•˜ê³ 
        float mouseX = Input.GetAxis("Mouse X");
        float mouseY = Input.GetAxis("Mouse Y");

        mx += mouseX * rotSpeed * Time.deltaTime;
        my += mouseY * rotSpeed * Time.deltaTime;
        my = Mathf.Clamp(my, -90.0f, 90.0f);

       // ì•Œë§ì€ ì‚¼ê°í•¨ìˆ˜ë¥¼ ì ìš©í•´ í”Œë ˆì´ì–´ ì£¼ë³€ì„ ëŒê²Œ í•¨
        float x = dist * Mathf.Cos(mx);
        float z = dist * Mathf.Sin(mx);
        float y = dist * Mathf.Tan(my);

        tr.position = new Vector3(target.transform.position.x + x, target.transform.position.y + y, target.transform.position.z + z);
        // í•­ìƒ í”Œë ˆì´ì–´ë¥¼ ë³´ë„ë¡ í•¨
        tr.LookAt(target.transform);
    }
{% endhighlight %} 

###### 2. FSMì„ ì´ìš©í•´ ì¹´ë©”ë¼ì˜ Stateë¥¼ Intro, Tutorial, Play_Behind, Play_Aroundë¡œ êµ¬ë¶„í•˜ê³ , ê° ìƒíƒœë³„ë¡œ ë‹¤ë¥¸ ë©”ì„œë“œì— ë”°ë¼ ì›€ì§ì´ë„ë¡ í•œë‹¤.

<hr>

- ì¹´ë©”ë¼ì˜ State êµ¬ë¶„
 {% highlight c# %}
 enum CameraState
    {
        Intro,
        Tutorial,
        Play_Behind,
        Play_Around
    }
    void Update()
    {
        switch (state)
        {
            case CameraState.Intro:
                Intro();
                break;
            case CameraState.Tutorial:
                Tutorial();
                break;
            case CameraState.Play_Behind:
                Play_Behind();
                break;
            case CameraState.Play_Around:
                Play_Around();
                break;
        }
    }
 {% endhighlight %}


- Play_Behindì™€ Play_Around ì‚¬ì´ë¥¼ ì˜¤ê°€ëŠ” ì½”ë“œ
{% highlight c# %}
private void Play_Behind()
    {
        transform.position = target1.position;
        transform.forward = target1.forward;

        float mouseX = Input.GetAxis("Mouse X");
        float mouseY = Input.GetAxis("Mouse Y");

        // ë§ˆìš°ìŠ¤ì˜ ìƒí•˜ì¢Œìš° ì´ë™ì´ ìˆìœ¼ë©´ Play_Aroundë¡œ ì „í™˜
        if(mouseX!= 0 || mouseY!=0)
        {
            transform.position = Vector3.Lerp(transform.position, target2.position, 2 * Time.deltaTime);
            transform.forward = Vector3.Lerp(transform.forward, target2.forward, 2 * Time.deltaTime);
            state = CameraState.Play_Around;
        }
    }
    private void Play_Around()
    {
        transform.position = target2.position;
        transform.forward = target2.forward;

        // ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í•´ ì¼ë°˜ ë˜ëŠ” ë¶€ìŠ¤íŠ¸ í—¤ì—„ì´ ì‹œì‘ë˜ë©´ Play_Behindë¡œ ì „í™˜
        if (Input.GetMouseButtonDown(0) || Input.GetMouseButtonDown(1))
        {
            transform.position = Vector3.Lerp(transform.position, target1.position, 2 * Time.deltaTime);
            transform.forward = Vector3.Lerp(transform.forward, target1.forward, 2 * Time.deltaTime);
            state = CameraState.Play_Behind;
        }
    }
{% endhighlight %}  

### 2. í”Œë ˆì´ì–´ ì¡°ì‘  

ë°©í–¥í‚¤ë¡œ ì§„í–‰ ë°©í–¥ì„ ì¡°ì ˆí•˜ê³ , WASD í‚¤ë¡œ íšŒì „ ë“±ì˜ í–‰ë™ì„ ì‹¤í–‰í•œë‹¤.  
Character Controllerë¥¼ ì´ìš©í•´ ì•ìœ¼ë¡œ í—¤ì—„ì¹˜ê²Œ í•˜ê³ , ë§ˆìš°ìŠ¤ í´ë¦­ìœ¼ë¡œ í—¤ì—„ ì†ë ¥ì„ ì¡°ì ˆí•œë‹¤.
ëŒ€í‘œë¡œ í•˜ë‚˜ë§Œ

* í”Œë ˆì´ì–´ ì¡°ì‘ ì½”ë“œ
playermovemidnight

@startmermaid
stateDiagram-v2
    [*] --> Active
    state Active {
        [*] --> MainRoom
        MainRoom --> [*] : quit
        MainRoom --> Exercise : selectMusic
        Exercise --> Result : timeEnd
        Result --> MainRoom : addRank 
    }
    Active --> [*]
@endmermaid

* ë¬¼ ì†ì—ì„œ ë¶€ìœ í•˜ëŠ” ëŠë‚Œì„ ë‚´ê¸° ìœ„í•´ ì‹œê°„ íë¦„ì— ë”°ë¼ yê°’ì— ë³€í™”ë¥¼ ì£¼ëŠ” ì½”ë“œ
{% highlight c# %}
  private void FloatPlayer()
      {
          float y = amp * Mathf.Sin(currentTime * floatSpeed); //ìœ„ì•„ë˜ 
          transform.position += Vector3.up * y;
      }
{% endhighlight %} 


---

### 3. íŠœí† ë¦¬ì–¼

íŠœí† ë¦¬ì–¼ì—ì„œëŠ” í—¤ì—„, ë¶€ìŠ¤íŠ¸ í—¤ì—„, ë°©í–¥ ë³€ê²½ì˜ ì„¸ ê¸°ëŠ¥ì„ ìˆœì„œëŒ€ë¡œ ì‚¬ìš©í•´ ë³´ë„ë¡ í•œë‹¤. UIì˜ ì•ˆë‚´ë¥¼ ë”°ë¼ì•¼ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì•¼ë§Œ ë‹¤ìŒ íŠœí† ë¦¬ì–¼ë¡œ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ Swim, Boost, Turn ê° íŠœí† ë¦¬ì–¼ ë‹¨ê³„ì˜ ì‹¤í–‰ ì—¬ë¶€ë¥¼ __bool__ ê°’ìœ¼ë¡œ íŒë³„í•˜ì˜€ë‹¤.  

![]({{site.baseurl}}/images/Diveway_Tutorial_gif.gif)  

{% highlight c# %}
  private void Tutorial()
      {
          transform.position = Vector3.Lerp(transform.position, target1.position, 5 * Time.deltaTime);
          transform.forward = Vector3.Lerp(transform.forward, target1.forward, 5 * Time.deltaTime);
          currentTime += Time.deltaTime;
          if (isSwimUIState == true)
          {
              if (swimUI.activeSelf == false && currentTime>1.5f)
                  swimUI.SetActive(true);
              else
              {
                  if (Input.GetMouseButton(1))
                  {
                      swimUI.SetActive(false);
                      isSwimUIState = false;
                      isBoostUIState = true;
                      currentTime = 0;
                  }
              }
          }
          else if (isBoostUIState == true)
          {
              if (boostUI.activeSelf == false)
              {
                  currentTime += Time.deltaTime;
                  if (currentTime > 3)
                      boostUI.SetActive(true);
              }
              else
              {
                  if (Input.GetMouseButton(0))
                  {
                      boostUI.SetActive(false);
                      isBoostUIState = false;
                      isTurnUIState = true;
                      currentTime = 0;
                  }
              }

          }
          else if (isTurnUIState == true)
          {
              if (turnUI.activeSelf == false)
              {
                  currentTime += Time.deltaTime;
                  if (currentTime > 1)
                      turnUI.SetActive(true);
              }
              else
              {
                  if (Input.GetKey(KeyCode.W) || Input.GetKey(KeyCode.A)|| Input.GetKey(KeyCode.S)|| Input.GetKey(KeyCode.D)) 
                  {
                      turnUI.SetActive(false);
                      state = CameraState.Play_Behind;
                  }
              }
          }
      }
{% endhighlight %}

---

### 3. ë¯¸ì…˜

---



